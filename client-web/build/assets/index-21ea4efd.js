import{k as S,aE as je,aF as ve,a5 as L,l as s,al as he,a3 as b,aG as ce,S as Q,ab as de,Y as K,aH as be,aI as De,a9 as Ne,aJ as z,an as J,aK as ae,aL as ie,ad as re,aM as Re,O as W,aN as Pe,aj as Ie,a4 as ke,aO as Se,az as pe,p as G,aA as Z,ay as ee,aP as oe,aQ as Ae,W as Oe,Q as Ee,aR as Me,aS as ge,aT as me,av as V,aU as $,X as Y,aV as Be,aW as _e,aX as Te,as as Le,aa as He}from"./index-451a7b86.js";import{C as le,d as xe,c as Ye}from"./createPrivateChat-8307fef9.js";import{Q as Ue}from"./QrModal-ea72c52d.js";import{L as te,a as se}from"./ListItemAvatar-3588bb64.js";import{L as ne,T as ue}from"./Transactions-ceb458f0.js";var we={exports:{}};(function(o,C){(function(x,j){o.exports=j(S)})(je,x=>(()=>{var j={899:m=>{m.exports=x}},c={};function u(m){var i=c[m];if(i!==void 0)return i.exports;var w=c[m]={exports:{}};return j[m](w,w.exports,u),w.exports}u.n=m=>{var i=m&&m.__esModule?()=>m.default:()=>m;return u.d(i,{a:i}),i},u.d=(m,i)=>{for(var w in i)u.o(i,w)&&!u.o(m,w)&&Object.defineProperty(m,w,{enumerable:!0,get:i[w]})},u.o=(m,i)=>Object.prototype.hasOwnProperty.call(m,i),u.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var O={};return(()=>{u.r(O),u.d(O,{Component:()=>D,areCropsEqual:()=>_,centerCrop:()=>X,clamp:()=>B,containCrop:()=>R,convertToPercentCrop:()=>T,convertToPixelCrop:()=>E,default:()=>D,defaultCrop:()=>f,makeAspectCrop:()=>U,nudgeCrop:()=>N});var m=u(899),i=u.n(m);function w(h){var e,t,a="";if(typeof h=="string"||typeof h=="number")a+=h;else if(typeof h=="object")if(Array.isArray(h))for(e=0;e<h.length;e++)h[e]&&(t=w(h[e]))&&(a&&(a+=" "),a+=t);else for(e in h)h[e]&&(a&&(a+=" "),a+=e);return a}const f={x:0,y:0,width:0,height:0,unit:"px"};function B(h,e,t){return Math.min(Math.max(h,e),t)}function _(h,e){return h.width===e.width&&h.height===e.height&&h.x===e.x&&h.y===e.y&&h.unit===e.unit}function U(h,e,t,a){const n=E(h,t,a);return h.width&&(n.height=n.width/e),h.height&&(n.width=n.height*e),n.y+n.height>a&&(n.height=a-n.y,n.width=n.height*e),n.x+n.width>t&&(n.width=t-n.x,n.height=n.width/e),h.unit==="%"?T(n,t,a):n}function X(h,e,t){const a=E(h,e,t);return a.x=(e-a.width)/2,a.y=(t-a.height)/2,h.unit==="%"?T(a,e,t):a}function T(h,e,t){return h.unit==="%"?{...f,...h,unit:"%"}:{unit:"%",x:h.x?h.x/e*100:0,y:h.y?h.y/t*100:0,width:h.width?h.width/e*100:0,height:h.height?h.height/t*100:0}}function E(h,e,t){return h.unit?h.unit==="px"?{...f,...h,unit:"px"}:{unit:"px",x:h.x?h.x*e/100:0,y:h.y?h.y*t/100:0,width:h.width?h.width*e/100:0,height:h.height?h.height*t/100:0}:{...f,...h,unit:"px"}}function R(h,e,t,a,n,l=0,p=0,P=a,d=n){const r={...h};let y=Math.min(l,a),v=Math.min(p,n),I=Math.min(P,a),g=Math.min(d,n);e&&(e>1?(y=p?p*e:y,v=y/e,I=P*e):(v=l?l/e:v,y=v*e,g=d/e)),r.y<0&&(r.height=Math.max(r.height+r.y,v),r.y=0),r.x<0&&(r.width=Math.max(r.width+r.x,y),r.x=0);const k=a-(r.x+r.width);k<0&&(r.x=Math.min(r.x,a-y),r.width+=k);const M=n-(r.y+r.height);if(M<0&&(r.y=Math.min(r.y,n-v),r.height+=M),r.width<y&&(t!=="sw"&&t!="nw"||(r.x-=y-r.width),r.width=y),r.height<v&&(t!=="nw"&&t!="ne"||(r.y-=v-r.height),r.height=v),r.width>I&&(t!=="sw"&&t!="nw"||(r.x-=I-r.width),r.width=I),r.height>g&&(t!=="nw"&&t!="ne"||(r.y-=g-r.height),r.height=g),e){const F=r.width/r.height;if(F<e){const H=Math.max(r.width/e,v);t!=="nw"&&t!="ne"||(r.y-=H-r.height),r.height=H}else if(F>e){const H=Math.max(r.height*e,y);t!=="sw"&&t!="nw"||(r.x-=H-r.width),r.width=H}}return r}function N(h,e,t,a){const n={...h};return e==="ArrowLeft"?a==="nw"?(n.x-=t,n.y-=t,n.width+=t,n.height+=t):a==="w"?(n.x-=t,n.width+=t):a==="sw"?(n.x-=t,n.width+=t,n.height+=t):a==="ne"?(n.y+=t,n.width-=t,n.height-=t):a==="e"?n.width-=t:a==="se"&&(n.width-=t,n.height-=t):e==="ArrowRight"&&(a==="nw"?(n.x+=t,n.y+=t,n.width-=t,n.height-=t):a==="w"?(n.x+=t,n.width-=t):a==="sw"?(n.x+=t,n.width-=t,n.height-=t):a==="ne"?(n.y-=t,n.width+=t,n.height+=t):a==="e"?n.width+=t:a==="se"&&(n.width+=t,n.height+=t)),e==="ArrowUp"?a==="nw"?(n.x-=t,n.y-=t,n.width+=t,n.height+=t):a==="n"?(n.y-=t,n.height+=t):a==="ne"?(n.y-=t,n.width+=t,n.height+=t):a==="sw"?(n.x+=t,n.width-=t,n.height-=t):a==="s"?n.height-=t:a==="se"&&(n.width-=t,n.height-=t):e==="ArrowDown"&&(a==="nw"?(n.x+=t,n.y+=t,n.width-=t,n.height-=t):a==="n"?(n.y+=t,n.height-=t):a==="ne"?(n.y+=t,n.width-=t,n.height-=t):a==="sw"?(n.x-=t,n.width+=t,n.height+=t):a==="s"?n.height+=t:a==="se"&&(n.width+=t,n.height+=t)),n}const A={capture:!0,passive:!1};class D extends m.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,m.createRef)(),this.mediaRef=(0,m.createRef)(),this.initChangeCalled=!1,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:a}=this.props,n=this.getBox();if(!t)return;const l=E(t,n.width,n.height);if(a)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const p=e.target.dataset.ord,P=!!p;let d=e.clientX,r=e.clientY,y=l.x,v=l.y;if(p){const I=e.clientX-n.x,g=e.clientY-n.y;let k=0,M=0;p==="ne"||p=="e"?(k=I-(l.x+l.width),M=g-l.y,y=l.x,v=l.y+l.height):p==="se"||p==="s"?(k=I-(l.x+l.width),M=g-(l.y+l.height),y=l.x,v=l.y):p==="sw"||p=="w"?(k=I-l.x,M=g-(l.y+l.height),y=l.x+l.width,v=l.y):p!=="nw"&&p!="n"||(k=I-l.x,M=g-l.y,y=l.x+l.width,v=l.y+l.height),d=y+n.x+k,r=v+n.y+M}this.evData={startClientX:d,startClientY:r,startCropX:y,startCropY:v,clientX:e.clientX,clientY:e.clientY,isResize:P,ord:p},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:a,locked:n,keepSelection:l,onChange:p}=this.props,P=this.getBox();if(a||n||l&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const d=e.clientX-P.x,r=e.clientY-P.y,y={unit:"px",x:d,y:r,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:d,startCropY:r,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,p(E(y,P.width,P.height),T(y,P.width,P.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:a,onChange:n,onDragStart:l}=this.props,p=this.getBox();if(a||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,l&&l(e));const{evData:P}=this;let d;P.clientX=e.clientX,P.clientY=e.clientY,d=P.isResize?this.resizeCrop():this.dragCrop(),_(t,d)||n(E(d,p.width,p.height),T(d,p.width,p.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:a,onChange:n,onComplete:l}=this.props,p=this.getBox();if(a)return;const P=e.key;let d=!1;if(!t)return;const r=this.makePixelCrop(),y=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?D.nudgeStepLarge:e.shiftKey?D.nudgeStepMedium:D.nudgeStep;if(P==="ArrowLeft"?(r.x-=y,d=!0):P==="ArrowRight"?(r.x+=y,d=!0):P==="ArrowUp"?(r.y-=y,d=!0):P==="ArrowDown"&&(r.y+=y,d=!0),d){e.cancelable&&e.preventDefault(),r.x=B(r.x,0,p.width-r.width),r.y=B(r.y,0,p.height-r.height);const v=E(r,p.width,p.height),I=T(r,p.width,p.height);n(v,I),l&&l(v,I)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:a=0,crop:n,disabled:l,minWidth:p=0,minHeight:P=0,maxWidth:d,maxHeight:r,onChange:y,onComplete:v}=this.props,I=this.getBox();if(l||!n||e.key!=="ArrowUp"&&e.key!=="ArrowDown"&&e.key!=="ArrowLeft"&&e.key!=="ArrowRight")return;e.stopPropagation(),e.preventDefault();const g=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?D.nudgeStepLarge:e.shiftKey?D.nudgeStepMedium:D.nudgeStep,k=R(N(E(n,I.width,I.height),e.key,g,t),a,t,I.width,I.height,p,P,d,r);if(!_(n,k)){const M=T(k,I.width,I.height);y(k,M),v&&v(k,M)}},this.onDocPointerDone=e=>{const{crop:t,disabled:a,onComplete:n,onDragEnd:l}=this.props,p=this.getBox();this.unbindDocMove(),!a&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,l&&l(e),n&&n(E(t,p.width,p.height),T(t,p.width,p.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=e=>{var t;(t=this.componentRef.current)===null||t===void 0||t.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:a,width:n,height:l}=e.getBoundingClientRect();return{x:t,y:a,width:n,height:l}}componentDidUpdate(e){const{crop:t,onComplete:a}=this.props;if(a&&!e.crop&&t){const{width:n,height:l}=this.getBox();n&&l&&a(E(t,n,l),T(t,n,l))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,A),this.document.addEventListener("pointerup",this.onDocPointerDone,A),this.document.addEventListener("pointercancel",this.onDocPointerDone,A),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,A),this.document.removeEventListener("pointerup",this.onDocPointerDone,A),this.document.removeEventListener("pointercancel",this.onDocPointerDone,A),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),a=this.makePixelCrop(),n=e.clientX-e.startClientX,l=e.clientY-e.startClientY;return a.x=B(e.startCropX+n,0,t.width-a.width),a.y=B(e.startCropY+l,0,t.height-a.height),a}getPointRegion(e){const{evData:t}=this,a=t.clientX-e.x,n=t.clientY-e.y<t.startCropY;return a<t.startCropX?n?"nw":"sw":n?"ne":"se"}resizeCrop(){const{evData:e}=this,t=this.getBox(),{aspect:a=0,minWidth:n=0,minHeight:l=0,maxWidth:p,maxHeight:P}=this.props,d=this.getPointRegion(t),r=this.makePixelCrop(),y=e.ord?e.ord:d,v=e.clientX-e.startClientX,I=e.clientY-e.startClientY,g={unit:"px",x:0,y:0,width:0,height:0};d==="ne"?(g.x=e.startCropX,g.width=v,a?(g.height=g.width/a,g.y=e.startCropY-g.height):(g.height=Math.abs(I),g.y=e.startCropY-g.height)):d==="se"?(g.x=e.startCropX,g.y=e.startCropY,g.width=v,g.height=a?g.width/a:I):d==="sw"?(g.x=e.startCropX+v,g.y=e.startCropY,g.width=Math.abs(v),g.height=a?g.width/a:I):d==="nw"&&(g.x=e.startCropX+v,g.width=Math.abs(v),a?(g.height=g.width/a,g.y=e.startCropY-g.height):(g.height=Math.abs(I),g.y=e.startCropY+I));const k=R(g,a,d,t.width,t.height,n,l,p,P);return a||D.xyOrds.indexOf(y)>-1?(r.x=k.x,r.y=k.y,r.width=k.width,r.height=k.height):D.xOrds.indexOf(y)>-1?(r.x=k.x,r.width=k.width):D.yOrds.indexOf(y)>-1&&(r.y=k.y,r.height=k.height),r}createCropSelection(){const{ariaLabels:e=D.defaultProps.ariaLabels,disabled:t,locked:a,renderSelectionAddon:n,ruleOfThirds:l,crop:p}=this.props,P=this.getCropStyle();if(p)return i().createElement("div",{style:P,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!a&&i().createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},i().createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),i().createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),i().createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),i().createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"nw"),role:"button"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"n"),role:"button"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"ne"),role:"button"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"e"),role:"button"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"se"),role:"button"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"s"),role:"button"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"sw"),role:"button"}),i().createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"w"),role:"button"})),n&&i().createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:d=>d.stopPropagation()},n(this.state)),l&&i().createElement(i().Fragment,null,i().createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),i().createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(){const e={...f,...this.props.crop||{}},t=this.getBox();return E(e,t.width,t.height)}render(){const{aspect:e,children:t,circularCrop:a,className:n,crop:l,disabled:p,locked:P,style:d,ruleOfThirds:r}=this.props,{cropIsActive:y,newCropIsBeingDrawn:v}=this.state,I=l?this.createCropSelection():null,g=function(){for(var k,M,F=0,H="";F<arguments.length;)(k=arguments[F++])&&(M=w(k))&&(H&&(H+=" "),H+=M);return H}("ReactCrop",n,{"ReactCrop--active":y,"ReactCrop--disabled":p,"ReactCrop--locked":P,"ReactCrop--new-crop":v,"ReactCrop--fixed-aspect":l&&e,"ReactCrop--circular-crop":l&&a,"ReactCrop--rule-of-thirds":l&&r,"ReactCrop--invisible-crop":!this.dragStarted&&l&&!l.width&&!l.height});return i().createElement("div",{ref:this.componentRef,className:g,style:d},i().createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),I)}}D.xOrds=["e","w"],D.yOrds=["n","s"],D.xyOrds=["nw","ne","se","sw"],D.nudgeStep=1,D.nudgeStepMedium=10,D.nudgeStepLarge=100,D.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}}})(),O})())})(we);var q=we.exports;const Xe=ve(q);function Fe(o,C,x){return q.centerCrop(q.makeAspectCrop({unit:"%",width:90},x,o,C),o,C)}function Ke({open:o,setOpen:C}){const x=L(R=>R.user),j=L(R=>R.setUser),c=S.useRef(null),[u,O]=S.useState(""),m=S.useRef(null),[i,w]=S.useState(),[f,B]=S.useState(),_=2;function U(R){if(R.target.files&&R.target.files.length>0){const N=new FileReader;N.addEventListener("load",()=>{var A;return O(((A=N.result)==null?void 0:A.toString())||"")}),N.readAsDataURL(R.target.files[0])}}function X(R){{const{width:N,height:A}=R.currentTarget;w(Fe(N,A,_))}}function T(){const R=new FormData;R.append("file",f,"profileImg"),be(R).then(N=>{j({...x,profileImage:N.data.user.profileImage}),C(!1)}).catch(N=>console.log(N))}function E(R){const N=document.createElement("canvas"),A=window.devicePixelRatio,D=m.current.naturalWidth/m.current.width,h=m.current.naturalHeight/m.current.height,e=N.getContext("2d");N.width=R.width*A*D,N.height=R.height*A*h,e.setTransform(A,0,0,A,0,0),e.imageSmoothingQuality="high",e.drawImage(m.current,R.x*D,R.y*h,R.width*D,R.height*h,0,0,R.width*D,R.height*h),N.toBlob(t=>{if(!t){console.error("Canvas is empty");return}B(t)},"image/jpeg",1)}return s.jsx(he,{onClose:()=>C(!1),open:o,children:s.jsxs(b,{children:[s.jsxs(ce,{style:{display:"flex",justifyContent:"space-between"},children:["Change Image",s.jsx(Q,{onClick:()=>{O(""),C(!1)},children:s.jsx(de,{})})]}),s.jsx(b,{sx:{typography:"body1",padding:1},children:s.jsxs(b,{style:{width:"400px"},children:[!u&&s.jsxs(b,{style:{height:"200px",display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("input",{type:"file",ref:c,style:{display:"none"},accept:"image/*",onChange:U}),s.jsx(K,{onClick:()=>c.current.click(),children:"Upload"})]}),!!u&&s.jsxs(b,{children:[s.jsx(Xe,{crop:i,onChange:(R,N)=>w(N),onComplete:E,minWidth:100,minHeight:100,children:s.jsx("img",{style:{width:"400px",height:"auto"},ref:m,alt:"Crop me",src:u,onLoad:X})}),s.jsx(b,{style:{display:"flex"},children:s.jsx(K,{onClick:T,style:{marginLeft:"auto"},children:"Save"})})]})]})})]})})}function We({open:o,setOpen:C,user:x}){const[j,c]=S.useState(!1),[u,O]=S.useState(!1),m=L(w=>w.setUser),i=De({initialValues:{firstName:x.firstName,lastName:x.lastName,description:x.description?x.description:"",isProfileOpen:x.isProfileOpen,isAssetsOpen:x.isAssetsOpen},validate:w=>{const f={};return w.firstName||(f.firstName="Required"),w.lastName||(f.lastName="Required"),f},onSubmit:w=>{const f=new FormData;f.append("firstName",w.firstName),f.append("lastName",w.lastName),w.description&&f.append("description",w.description),f.append("isProfileOpen",w.isProfileOpen),f.append("isAssetsOpen",w.isAssetsOpen),O(!0),Ne().put("/users",f).then(B=>{const _=B.data.user;m({...x,firstName:_.firstName,lastName:_.lastName,description:_.description,isProfileOpen:_.isProfileOpen,isAssetsOpen:_.isAssetsOpen}),C(!1)}).finally(()=>O(!1))}});return s.jsxs(he,{onClose:()=>C(!1),open:o,children:[s.jsxs(b,{children:[s.jsxs(ce,{style:{display:"flex",justifyContent:"space-between"},children:["Edit Profile",s.jsx(Q,{onClick:()=>C(!1),children:s.jsx(de,{})})]}),s.jsx(b,{sx:{width:"100%",typography:"body1",padding:1},children:s.jsxs(b,{style:{display:"flex"},children:[s.jsx(b,{sx:{marginRight:"10px"},style:{display:"flex",flexDirection:"column",cursor:"pointer"},children:s.jsx("div",{onClick:()=>c(!0),children:s.jsx("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:x.profileImage?x.profileImage:z})})}),s.jsx(b,{children:s.jsxs("form",{style:{display:"flex",flexDirection:"column"},onSubmit:i.handleSubmit,children:[s.jsx(J,{margin:"dense",label:"First Name",name:"firstName",id:"firstName",variant:"standard",error:!!(i.touched.firstName&&i.errors.firstName),helperText:i.touched.firstName&&i.errors.firstName?i.errors.firstName:"",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values.firstName}),s.jsx(J,{margin:"dense",label:"Last Name",name:"lastName",id:"lastName",variant:"standard",error:!!(i.touched.lastName&&i.errors.lastName),helperText:i.touched.lastName&&i.errors.lastName?i.errors.lastName:"",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values.lastName}),s.jsx(J,{margin:"dense",label:"Profile Description",name:"description",id:"description",variant:"standard",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values.description}),s.jsx(ae,{placement:"top",title:"When enabled, your profile and documents will be visible by all visitors. When disabled, your profile will only be seen by those who received a direct sharing link from you.",children:s.jsx(ie,{checked:i.values.isProfileOpen,name:"isProfileOpen",id:"isProfileOpen",control:s.jsx(re,{onChange:w=>{i.setFieldValue("isProfileOpen",w.target.checked)}}),label:"Profile is public",labelPlacement:"end"})}),s.jsx(ae,{placement:"bottom",title:"When this is enabled, all of your documents will be visible to those who have access to your profile. When this is disabled, you will need to share your documents individually so others can see them.",children:s.jsx(ie,{checked:i.values.isAssetsOpen||i.values.isProfileOpen,name:"isAssetsOpen",id:"isAssetsOpen",control:s.jsx(re,{disabled:i.values.isProfileOpen,onChange:w=>{i.setFieldValue("isAssetsOpen",w.target.checked)}}),label:"Documents are public",labelPlacement:"end"})}),s.jsx(Re,{id:"submitProfile",type:"submit",loading:u,variant:"contained",children:"Save"})]})})]})})]}),j&&s.jsx(Ke,{open:j,setOpen:c})]})}function fe({profile:o,walletAddress:C}){const[x,j]=S.useState(!1),c=L(f=>f.user),[u,O]=S.useState(!1),m=L(f=>f.setActiveRoomFilter),i=W(),w=()=>{Ye(c.walletAddress,C,c.firstName,o.firstName).then(f=>{if(f.isNewRoom){const B={jid:f.roomJid,name:f.roomName,room_background:"none",room_thumbnail:"none",users_cnt:"2",unreadMessages:0,composing:"",toUpdate:!0,description:""};L.getState().setNewUserChatRoom(B),i.push("/chat/"+f.roomJid),m("private")}else i.push("/chat/"+f.roomJid)}).catch(f=>{console.log("openPrivateRoom Error:",f)})};return o?s.jsx(b,{style:{marginTop:"10px",marginRight:"10px"},children:s.jsxs(le,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[s.jsx(b,{sx:{marginRight:"10px"},children:!!o.firstName&&s.jsx("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:o.profileImage||z})}),s.jsxs(b,{children:[s.jsxs(b,{sx:{fontWeight:"bold"},children:[o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]}),(o==null?void 0:o.description)&&s.jsxs(b,{children:["Description: ",o==null?void 0:o.description]}),!!c.walletAddress&&s.jsx(K,{onClick:w,variant:"contained",size:"small",children:"Direct message"})]})]})}):s.jsxs(b,{sx:{marginTop:"10px",marginRight:"10px",width:250},children:[s.jsxs(le,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[s.jsx(b,{sx:{marginRight:"10px"},children:s.jsx("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:c.profileImage||z})}),s.jsx(b,{sx:{width:"100%"},children:!!c.firstName&&s.jsxs(b,{children:[s.jsxs(b,{sx:{fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c==null?void 0:c.firstName," ",c==null?void 0:c.lastName,s.jsx(Q,{sx:{color:"black"},onClick:()=>O(!0),children:s.jsx(xe,{})})]}),(c==null?void 0:c.description)&&s.jsxs(b,{children:["Description: ",c==null?void 0:c.description]})]})}),c.firstName&&s.jsx(K,{onClick:f=>{j(!0)},children:"Edit"})]}),x&&s.jsx(We,{open:x,setOpen:j,user:c}),s.jsx(Ue,{open:u,link:Pe({firstName:c.firstName,lastName:c.lastName,walletAddress:c.walletAddress,xmppId:Ie(c.walletAddress)+ke}),onClose:()=>O(!1)})]})}const ze=({item:o,walletAddress:C})=>{const x=G(),j=W(),c=()=>{j.push({pathname:"/provenance",state:{nftItem:o,walletAddress:C}})};return s.jsx(Z,{children:s.jsxs(te,{onClick:c,children:[s.jsx(se,{children:s.jsx(ee,{style:{backgroundColor:x.palette.primary.main},src:o.imagePreview})}),s.jsx(ne,{primary:o.tokenName}),s.jsx(b,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsxs("span",{style:{textAlign:"left",width:50},children:[o.balance,"/",o.total]})})]})},o.nftId)},$e=({item:o,walletAddress:C})=>{const x=G(),j=W(),c=()=>{j.push({pathname:"/provenance",state:{nftItem:o,walletAddress:C}})};return s.jsx(Z,{children:s.jsxs(te,{onClick:c,children:[s.jsx(se,{children:s.jsx(ee,{style:{backgroundColor:x.palette.primary.main},src:o.nftFileUrl})}),s.jsx(ne,{primary:o.tokenName}),s.jsxs(b,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[s.jsx(b,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:o.traits.map(u=>oe[u]?s.jsx(Ae,{sx:{backgroundColor:oe[u].color,marginRight:"5px"},label:u},u):null)}),s.jsxs("span",{style:{textAlign:"left",width:50},children:[o.balance,"/",o.total]})]})]})},o.nftId)};function ye({balance:o,walletAddress:C}){const x=o.filter(c=>c.tokenType==="NFT"),j=Se(o);return s.jsxs(pe,{sx:{width:"100%",bgcolor:"background.paper"},children:[x.map((c,u)=>s.jsx(ze,{walletAddress:C,item:c},c.nftId)),j.map((c,u)=>s.jsx($e,{walletAddress:C,item:c},c.nftId+u))]})}const Qe=({item:o,walletAddress:C})=>{var u;const x=G(),j=W(),c=()=>{j.push({pathname:"/provenance",state:{nftItem:o,walletAddress:C}})};return s.jsx(Z,{children:s.jsxs(te,{onClick:c,children:[s.jsx(se,{children:s.jsx(ee,{style:{backgroundColor:x.palette.primary.main},src:((u=o==null?void 0:o.file)==null?void 0:u.locationPreview)||(o==null?void 0:o.location)})}),s.jsx(ne,{primary:o.documentName,secondary:Oe(new Date(o.createdAt),"pp PP")}),s.jsx(Ee,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsx(Q,{sx:{color:"black"},children:s.jsx(xe,{})})})]})},o._id)};function Ce({documents:o,walletAddress:C}){return s.jsx(pe,{sx:{width:"100%",bgcolor:"background.paper"},children:o.map(x=>s.jsx(Qe,{walletAddress:C,item:x},x._id))})}function Je(){const[o,C]=S.useState(!1),[x,j]=S.useState({items:[],limit:0,offset:0,total:0}),c=L(i=>i.user),u=L(i=>i.balance),O=L(i=>i.documents),m=L(i=>i.setBalance);return S.useEffect(()=>{C(!0),Me(c.walletAddress).then(i=>{m(i.data.balance)}),ge(c.walletAddress).then(i=>{j(i.data)}).finally(()=>C(!1))},[]),o?s.jsx(me,{}):s.jsxs(V,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[s.jsx(b,{sx:{margin:"auto",width:"200px"},children:s.jsx(fe,{})}),u.some($)&&s.jsx(Y,{variant:"h6",style:{margin:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:s.jsx("span",{children:"Items"})}),s.jsx(ye,{balance:u.filter($),walletAddress:c.walletAddress}),O.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Y,{variant:"h6",style:{margin:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:s.jsx("span",{children:"Documents"})}),s.jsx(Ce,{walletAddress:c.walletAddress,documents:O})]}),x.items.length>0&&s.jsxs(b,{children:[s.jsx(Y,{variant:"h6",style:{margin:"16px"},children:"Transactions"}),s.jsx(ue,{transactions:x.items})]})]})}function Ve({walletAddress:o}){const[C,x]=S.useState(!0),[j,c]=S.useState(),[u,O]=S.useState(),[m,i]=S.useState([]),[w,f]=S.useState([]),[B,_]=S.useState(!1),U=W(),X=Be(),T=async N=>{const A=[];for(const D of N)try{D.location=D.locations[0],A.push(D)}catch{console.log(D.files[0],"sdjfkls")}f(A)},E=()=>{ge(o).then(N=>{O(N.data)})},R=async()=>{x(!0);try{const N=await Le(o);c(N.data),i(N.data.balances.balance),T(N.data.documents)}catch(N){console.log(N),_(!0)}x(!1)};return S.useEffect(()=>{R(),E()},[]),C?s.jsx(me,{}):B?s.jsx(V,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:s.jsx(b,{sx:{display:"flex",justifyContent:"center"},children:s.jsxs(b,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[s.jsx("img",{style:{width:"150px",borderRadius:"10px"},width:150,height:150,alt:"",src:z}),s.jsx(Y,{sx:{fontWeight:"bold",margin:"8px 0"},children:"User does not exist."}),s.jsx(Y,{sx:{mb:3},children:"The account you are trying to access has been deleted or does not exist."}),s.jsx(K,{onClick:()=>X.key?U.goBack():U.push("/"),variant:"outlined",children:"Back"})]})})}):s.jsxs(V,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[!!j&&s.jsxs(_e,{children:[s.jsx("title",{children:Te+": "+j.firstName+" "+j.lastName}),s.jsx("meta",{property:"og:title",content:j.firstName+" "+j.lastName}),s.jsx("meta",{name:"description",content:j.description})]}),s.jsxs(b,{children:[!!(j!=null&&j.firstName)&&s.jsx(b,{sx:{width:"200px",margin:"auto",padding:"10px"},children:s.jsx(fe,{profile:j,walletAddress:o})}),m.some($)&&s.jsxs(s.Fragment,{children:[s.jsx(Y,{variant:"h6",style:{margin:"16px"},children:"Items"}),s.jsx(ye,{balance:m.filter($),walletAddress:o})]})]}),w.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Y,{variant:"h6",style:{margin:"16px"},children:"Documents"}),s.jsx(Ce,{walletAddress:o,documents:w})]}),!!u&&s.jsxs(s.Fragment,{children:[s.jsx(Y,{variant:"h6",style:{margin:"16px"},children:"Transactions"}),s.jsx(ue,{transactions:u.items})]})]})}function st(){const o=L(x=>x.user),C=He();return o.walletAddress===C.wallet?s.jsx(Je,{}):s.jsx(Ve,{walletAddress:C.wallet})}export{st as default};
